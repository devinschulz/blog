<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
{{- $isHome := .IsHome -}}
{{- $siteTitle := .Site.Title -}}
{{- with .Title | default $siteTitle }}
  <title>{{ . }}{{ if not $isHome }} - {{ $siteTitle }}{{ end }}</title>
  <meta property="og:title" content="{{ . }}" />
  <meta name="twitter:title" content="{{ . }}" />
  <meta property="og:title" content="{{ . }}">
  <meta name="apple-mobile-web-app-title" content="{{ . }}">
{{- end }}
{{- with .Description | default .Summary | default .Site.Params.description -}}
  <meta name="description" content="{{ . }}">
  <meta property="og:description" content="{{ . }}">
  <meta name="twitter:description" content="{{ . | truncate 200 }}">
{{- end -}}
{{- with .URL | absURL -}}
  <meta property="og:url" content="{{ . }}">
  <meta name="twitter:url" content="{{ . }}">
  <link rel="canonical" href="{{ . }}" />
{{- end -}}
{{ $img := (.Resources.ByType "image").GetMatch "*featured*" }}
{{ if $img }}
  {{ $facebook := $img.Fill "1200x630 Center" }}
  {{ $twitter := $img.Fill "1024x512 Center" }}
  <meta property="og:image" content="{{ $facebook.Permalink }}">
  <meta property="og:image:width" content="{{ $facebook.Width }}">
  <meta property="og:image:height" content="{{ $facebook.Height }}">
  <meta name="twitter:image" content="{{ $twitter.Permalink }}">
  <meta name="twitter:card" content="summary_large_image">
{{ else }}
  {{ with .Params.twitterShareImage | default .Params.twitterShare }}
    <meta name="twitter:image" content="{{ . | absURL}}">
    <meta name="twitter:card" content="summary">
  {{ end }}
  {{ with .Params.facebookShareImage | default .Params.facebookShare }}
    <meta property="og:image" content="{{ . | absURL}}">
  {{ end }}
{{ end }}
{{- with .Site.Author.twitter -}}
  <meta name="twitter:site" content="@{{ . }}">
  <meta name="twitter:creator" content="@{{ . }}">
{{- end -}}

<meta property="fb:app_id" content="">
<meta property="og:type" content="website">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="{{ .Site.LanguageCode }}">

<meta name="theme-color" content="{{ .Site.Params.brandColor }}">
<meta name="mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">
<meta name="format-detection" content="telephone=no">

<meta name="msapplication-config" content="{{ "/browserconfig.xml" | relURL }}">

{{ .Hugo.Generator }}

<link href="/images/icons/favicon.ico" rel="icon" type="image/x-icon"/>
<link rel="author" href="{{ "humans.txt" | relURL }}">

{{ if .Site.IsServer }}
  {{ $cssOpts := (dict "targetPath" "styles/main.css" "enableSourceMap" true ) }}
  {{ $styles := resources.Get "styles/main.scss" | toCSS $cssOpts | postCSS | fingerprint }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" />
{{ else }}
  {{ $cssOpts := (dict "targetPath" "styles/main.css" ) }}
  {{ $styles := resources.Get "styles/main.scss" | toCSS $cssOpts | postCSS | fingerprint }}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" />
{{ end }}

<link rel="alternate" href="{{ "/posts/index.xml" | absURL }}" type="application/rss+xml" title="{{ .Site.Title }}">
<link rel="manifest" href="{{ "site.webmanifest" | relURL }}">

{{ $scripts := resources.Get "scripts.js" | resources.ExecuteAsTemplate "scripts.js" . | minify | fingerprint }}
<script src="{{ $scripts.RelPermalink }}" defer></script>

